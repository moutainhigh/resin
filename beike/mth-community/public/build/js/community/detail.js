"use strict";var app=new Vue({el:"#vm",data:function(){return{article:{_id:"",theme_type:"",member_id:"",title:"",content:"",location:"",latitude:"",longitude:"",work_circle:"",life_circle:"",home_circle:"",hobby_circle:"",nick_name:"",head_path:"",like:[],comment:[],create_date:"",view_count:0,status:"",pic_path:[],cover_path:[],isAlreadyLiked:!1},comment:""}},filters:{handleName:function(e){return e?/^1(2|3|4|5|6|7|8|9)\d{9}$/.test(e)?e.substring(0,3)+"****"+e.substring(7,11):e:"匿名"}},methods:{addComment:function(){var e=this;e.comment&&fetch("/addComment",{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},method:"post",body:JSON.stringify({id:e.article._id,comment_content:e.comment})}).then(function(t){t.ok&&t.json().then(function(t){"succ"==t.rsp_code?(t.data.commentTimeFormatted="刚刚",e.article.comment.push(t.data),e.comment=""):M.Tip.danger("评论失败，请稍后重试！")})}).catch(function(e){M.Tip.danger("系统繁忙！")})},like:function(){var e=this;fetch("/like",{credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},method:"post",body:JSON.stringify({id:e.article._id,m:Math.random()})}).then(function(t){t.ok&&t.json().then(function(t){"succ"==t.rsp_code?(e.article.isAlreadyLiked=t.data.isLike,e.article.like=t.data.like):M.Tip.danger("操作失败，请稍后重试！")})})}},computed:{reversedComment:function(){return this.article.comment.reverse()},handledContent:function(){return decodeURIComponent(this.article.content)}},beforeMount:function(){this.article=_article},mounted:function(){}});